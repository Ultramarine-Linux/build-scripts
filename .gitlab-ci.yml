# This file is a template, and might need editing before it works on your project.
# To contribute improvements to CI/CD templates, please follow the Development guide at:
# https://docs.gitlab.com/ee/development/cicd/templates.html
# This specific template is located at:
# https://gitlab.com/gitlab-org/gitlab/-/blob/master/lib/gitlab/ci/templates/Bash.gitlab-ci.yml

# See https://docs.gitlab.com/ee/ci/yaml/index.html for all available options

# you can delete this line if you're not using Docker
image: registry.gitlab.com/ultramarine-linux/installer-buildenv/lapis:latest

stages: 
  - build
  - deploy
  - test

iso-cyber:
  stage: build
  script:
      - git clone https://gitlab.com/ultramarine-linux/ultramarine-kickstarts && cd ultramarine-kickstarts
      - ./build.sh cyber
      - ls
      - find . -name "*" | xargs file 
  artifacts:
    paths:
      - $PWD/Ultramarine-Linux-Live.iso
      - $PWD/
      - $PWD/*.iso

test-iso:
  stage: test
  script:
    - file results/Ultramarine-Linux-Live.iso | grep bootable
