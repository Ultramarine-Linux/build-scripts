image: fedora:35
services:
  - docker:dind

stages:
  - build
  - test
  - deploy

iso-budgie:
  stage: build
  script:
    - dnf install -y lorax-lmc-novirt vim-minimal pykickstart
    - make image
  artifacts:
    paths:
    - build/image/Ultramarine-budgie-35.iso
    when: always

iso-budgie-lct:
  stage: build
  script:
    - dnf install -y lorax-lmc-novirt vim-minimal pykickstart livecd-tools
    - ./build.sh budgie 35
  artifacts:
    paths:
    - UM-budgie.iso
    when: always
